{% extends 'backend_base.html' %}

{% block css %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'kindeditor-4.1.11-zh-CN/kindeditor/themes/default/default.css' %}">
    <link rel="stylesheet" href="{% static 'kindeditor-4.1.11-zh-CN/kindeditor/themes/simple/simple.css' %}">
{% endblock %}

{% block article %}
    <h3 class="text-center">编辑文章</h3>
    <form action="" method="post">
        {% csrf_token %}
        <h4 style="color: blueviolet">标题</h4>
        <div>
            <input type="text" name="title" class="form-control" value="{{ article_obj.title }}">
        </div>
{#        <h4 style="color: blueviolet">内容</h4>#}
{#        <div>#}
{#            <textarea name="content" id="id_content" cols="128" rows="15"></textarea>#}
{#        </div>#}
        {% load mytag %}
        {% eidt_article_menu article_obj.pk %}
        <h4 style="color: blueviolet">分类</h4>
        <div style="margin-left: 50px">
            {% for category in category_list %}
                <div  class="radio">
                    <label>
                        {% if article_obj.category.pk == category.pk %}
                            <input type="radio" value="{{ category.pk }}" name="category" checked>{{ category.name }}
                        {% else %}
                            <input type="radio" value="{{ category.pk }}" name="category">{{ category.name }}
                        {% endif %}
                    </label>
                </div>
            {% endfor %}
        </div>
        <h4 style="color: blueviolet">标签</h4>
        <div style="margin-left: 50px">
            {% for tag in tag_list %}
                <div  class="checkbox">
                    <label>
                        {% if tag in article_obj.tags.all %}
                            <input type="checkbox" value="{{ tag.pk }}" name="tag" checked>{{ tag.name }}
                        {% else %}
                            <input type="checkbox" value="{{ tag.pk }}" name="tag">{{ tag.name }}
                        {% endif %}
                    </label>
                </div>
            {% endfor %}
        </div>
        <br>
        <input type="submit" class="btn btn-primary btn-lg pull-right">
    </form>
{% endblock %}


{% block js %}
<script charset="utf-8" src="{% static 'kindeditor-4.1.11-zh-CN/kindeditor/kindeditor-all-min.js' %}"></script>
<script>
        KindEditor.ready(function(K) {
                window.editor = K.create('#id_content', {
                                width : '100%',
                                height: '600px',
                                resizeType: 1,
                                uploadJson : '/upload_image/',      // 上传图片的后端提交路径
                                {#themeType: 'simple'#}
                                extraFileUploadParams : {
                                    'csrfmiddlewaretoken': '{{ csrf_token }}'
                                },
                                });
        });
</script>
{% endblock %}